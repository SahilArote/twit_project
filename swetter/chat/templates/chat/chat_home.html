{% extends "layout.html" %}
{% block title %}Chat Home{% endblock %}
{% block content %}
<h2>All Users</h2>
<ul>
  {% for entry in users_with_messages %}
    <li>
      <strong>{{ entry.user.username }}</strong>
      {% if entry.message %}
        — {{ entry.message.content|truncatechars:50 }}
      {% else %}
        — No messages yet
      {% endif %}
      <br>
      <a href="{% url 'chat' entry.user.username %}" class="btn btn-sm btn-outline-primary">Open Chat</a>
    </li>
  {% endfor %}
</ul>

{% endblock %}